function Add_new_row_stage_service(){let n={},t=(new Date).getTime();return n.id=0,n.PropertyID=0,n.Value="",n.Code="",Material_DataProperties[t]=n,Render_PropertiesProduct_Add(t,n,"dtTablePropertiesProductBody"),t}function Event_Element_Stage_Service(){$(".PropertiesProduct").bind("change").change(function(){let n=this.id.replace("PropertiesProduct_",""),t=Number($(this).dropdown("get value"))?Number($(this).dropdown("get value")):0;Material_DataProperties[n].PropertyID=t});$(".PropertiesValue").bind("change").change(function(){let n=this.id.replace("PropertiesValue_","");$(this).attr("value",this.value);$(this).val(this.value);Material_DataProperties[n].Value=this.value});$(".PropertiesCode").bind("change").change(function(){let n=this.id.replace("PropertiesCode_","");$(this).attr("value",this.value);$(this).val(this.value);Material_DataProperties[n].Code=this.value});$("#dtTablePropertiesProduct tbody .buttonDeleteClass").bind("click").on("click",function(n){let t=Number($(this).closest("tr")[0].childNodes[0].innerHTML);delete Material_DataProperties[t];$("#rowStage_"+t).remove();n.stopPropagation()})}async function Render_PropertiesProduct_Add(n,t,i){return new Promise(()=>{setTimeout(()=>{var r=document.getElementById(i);if(r!=null){let t='<td class="d-none">'+n+'<\/td><td class=" vt-number-order"><\/td><td>'+AddCell_Properties(n)+"<\/td><td>"+AddCell_Properties_Code(n)+"<\/td><td>"+AddCell_Properties_Value(n)+'<\/td><td style="width: 50px;"><button class="buttonGrid"><i class="buttonDeleteClass vtt-icon vttech-icon-delete"><\/i><\/button><\/td>';t='<tr class="rowPropertiesProduct vt-number"  id=rowStage_'+n+">"+t+"<\/tr>";r.insertAdjacentHTML("beforeend",t)}Fill_Material_DataProperties(t,n);Event_Element_Stage_Service(n);ToolPopper()},10)})}function AddCell_Properties(n){return`
        <div class="ui fluid search selection dropdown PropertiesProduct form-control" title="${n}" id="PropertiesProduct_${n}">
            <input type="hidden"/>
            <i class="dropdown icon"></i>
            <input class="search" autocomplete="off" tabindex="0" />
            <div class="default text">${Outlang.Sys_dac_diem??`Đặc điểm`}</div>
            <div id="cbbPropertiesProduct_${n}" class="menu" tabindex="-1">
            </div>
        </div>
    `}function AddCell_Properties_Value(n){return'<input class="PropertiesValue form-control" id="PropertiesValue_'+n+'" type="text" />'}function AddCell_Properties_Code(n){return'<input class="PropertiesCode form-control" id="PropertiesCode_'+n+'" type="text"  maxlength="4" />'}function Fill_Material_DataProperties(n,t){Load_Combo(DataProperties,"cbbPropertiesProduct_"+t,!0);n&&($("#PropertiesProduct_"+t).dropdown("clear"),$("#PropertiesProduct_"+t).dropdown("refresh"),$("#PropertiesProduct_"+t).dropdown("set selected",n.PropertyID),$("#PropertiesValue_"+t).val(n.Value),$("#PropertiesCode_"+t).val(n.Code))}function Checking_Validate_Properties_Product(){if(Object.values(Material_DataProperties).length>0){let n=0;for(const t in Material_DataProperties){let i=Material_DataProperties[t];i.PropertyID==0?($("#PropertiesProduct_"+t).addClass("error"),n=1):$("#PropertiesProduct_"+t).removeClass("error");i.Code==""?($("#PropertiesCode_"+t).addClass("error"),n=1):$("#PropertiesCode_"+t).removeClass("error");i.Value==""?($("#PropertiesValue_"+t).addClass("error"),n=1):$("#PropertiesValue_"+t).removeClass("error")}n==1&&$("#textShowMessageMaster").html(Outlang.Kiem_tra_du_lieu_dac_diem??"Kiểm tra dữ liệu đặc điểm")}}