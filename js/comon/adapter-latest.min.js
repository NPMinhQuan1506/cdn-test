(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.adapter=n()}})(function(){return function(){function n(t,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!t[f]){if(h="function"==typeof require&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};t[f][0].call(s.exports,function(n){var i=t[f][1][n];return u(i||n)},s,s.exports,n,t,i,r)}return i[f].exports}for(var e="function"==typeof require&&require,f=0;f<r.length;f++)u(r[f]);return u}return n}()({1:[function(n,t){"use strict";var i=n("./adapter_factory.js"),r=i.adapterFactory({window:typeof window=="undefined"?undefined:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(n,t,i){"use strict";function h(n){"@babel/helpers - typeof";return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},h(n)}function c(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(c=function(n){return n?i:t})(n)}function o(n,t){var r,u,e,i,f;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=h(n)&&"function"!=typeof n)return{"default":n};if(r=c(t),r&&r.has(n))return r.get(n);u={__proto__:null};e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(f=e?Object.getOwnPropertyDescriptor(n,i):null,f&&(f.get||f.set)?Object.defineProperty(u,i,f):u[i]=n[i]);return u["default"]=n,r&&r.set(n,u),u}function a(){var c=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=c.window,h=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},i=s.log,n=s.detectBrowser(t),o={browserDetails:n,commonShim:r,extractVersion:s.extractVersion,disableLog:s.disableLog,disableWarnings:s.disableWarnings,sdp:l};switch(n.browser){case"chrome":if(!f||!f.shimPeerConnection||!h.shimChrome)return i("Chrome shim is not included in this adapter release."),o;if(n.version===null)return i("Chrome shim can not determine version, not shimming."),o;i("adapter.js shimming chrome.");o.browserShim=f;r.shimAddIceCandidateNullOrEmpty(t,n);r.shimParameterlessSetLocalDescription(t,n);f.shimGetUserMedia(t,n);f.shimMediaStream(t,n);f.shimPeerConnection(t,n);f.shimOnTrack(t,n);f.shimAddTrackRemoveTrack(t,n);f.shimGetSendersWithDtmf(t,n);f.shimSenderReceiverGetStats(t,n);f.fixNegotiationNeeded(t,n);r.shimRTCIceCandidate(t,n);r.shimRTCIceCandidateRelayProtocol(t,n);r.shimConnectionState(t,n);r.shimMaxMessageSize(t,n);r.shimSendThrowTypeError(t,n);r.removeExtmapAllowMixed(t,n);break;case"firefox":if(!u||!u.shimPeerConnection||!h.shimFirefox)return i("Firefox shim is not included in this adapter release."),o;i("adapter.js shimming firefox.");o.browserShim=u;r.shimAddIceCandidateNullOrEmpty(t,n);r.shimParameterlessSetLocalDescription(t,n);u.shimGetUserMedia(t,n);u.shimPeerConnection(t,n);u.shimOnTrack(t,n);u.shimRemoveStream(t,n);u.shimSenderGetStats(t,n);u.shimReceiverGetStats(t,n);u.shimRTCDataChannel(t,n);u.shimAddTransceiver(t,n);u.shimGetParameters(t,n);u.shimCreateOffer(t,n);u.shimCreateAnswer(t,n);r.shimRTCIceCandidate(t,n);r.shimConnectionState(t,n);r.shimMaxMessageSize(t,n);r.shimSendThrowTypeError(t,n);break;case"safari":if(!e||!h.shimSafari)return i("Safari shim is not included in this adapter release."),o;i("adapter.js shimming safari.");o.browserShim=e;r.shimAddIceCandidateNullOrEmpty(t,n);r.shimParameterlessSetLocalDescription(t,n);e.shimRTCIceServerUrls(t,n);e.shimCreateOfferLegacy(t,n);e.shimCallbacksAPI(t,n);e.shimLocalStreamsAPI(t,n);e.shimRemoteStreamsAPI(t,n);e.shimTrackEventTransceiver(t,n);e.shimGetUserMedia(t,n);e.shimAudioContext(t,n);r.shimRTCIceCandidate(t,n);r.shimRTCIceCandidateRelayProtocol(t,n);r.shimMaxMessageSize(t,n);r.shimSendThrowTypeError(t,n);r.removeExtmapAllowMixed(t,n);break;default:i("Unsupported browser!")}return o}Object.defineProperty(i,"__esModule",{value:!0});i.adapterFactory=a;var s=o(n("./utils")),f=o(n("./chrome/chrome_shim")),u=o(n("./firefox/firefox_shim")),e=o(n("./safari/safari_shim")),r=o(n("./common_shim")),l=o(n("sdp"))},{"./chrome/chrome_shim":3,"./common_shim":5,"./firefox/firefox_shim":6,"./safari/safari_shim":9,"./utils":10,sdp:11}],3:[function(n,t,i){"use strict";function f(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(f=function(n){return n?i:t})(n)}function h(n,t){var u,e,s,i,o;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=r(n)&&"function"!=typeof n)return{"default":n};if(u=f(t),u&&u.has(n))return u.get(n);e={__proto__:null};s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(o=s?Object.getOwnPropertyDescriptor(n,i):null,o&&(o.get||o.set)?Object.defineProperty(e,i,o):e[i]=n[i]);return e["default"]=n,u&&u.set(n,e),e}function e(n,t,i){return t=c(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function c(n){var t=l(n,"string");return"symbol"==r(t)?t:t+""}function l(n,t){var i,u;if("object"!=r(n)||!n)return n;if(i=n[Symbol.toPrimitive],void 0!==i){if(u=i.call(n,t||"default"),"object"!=r(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(n)}function r(n){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function a(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function v(n){if(r(n)!=="object"||!n.RTCPeerConnection||"ontrack"in n.RTCPeerConnection.prototype)u.wrapPeerConnectionEvent(n,"track",function(n){return n.transceiver||Object.defineProperty(n,"transceiver",{value:{receiver:n.receiver}}),n});else{Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(n){this._ontrack&&this.removeEventListener("track",this._ontrack);this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});var t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){var i=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",function(r){var f,u;f=n.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(n){return n.track&&n.track.id===r.track.id}):{track:r.track};u=new Event("track");u.track=r.track;u.receiver=f;u.transceiver={receiver:f};u.streams=[t.stream];i.dispatchEvent(u)});t.stream.getTracks().forEach(function(r){var f,u;f=n.RTCPeerConnection.prototype.getReceivers?i.getReceivers().find(function(n){return n.track&&n.track.id===r.id}):{track:r};u=new Event("track");u.track=r;u.receiver=f;u.transceiver={receiver:f};u.streams=[t.stream];i.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}}function y(n){var t,i,u,f,e,o;r(n)==="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype?(t=function(n,t){return{track:t,get dtmf(){return this._dtmf===undefined&&(this._dtmf=t.kind==="audio"?n.createDTMFSender(t):null),this._dtmf},_pc:n}},n.RTCPeerConnection.prototype.getSenders||(n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()},i=n.RTCPeerConnection.prototype.addTrack,n.RTCPeerConnection.prototype.addTrack=function(n){var r=i.apply(this,arguments);return r||(r=t(this,n),this._senders.push(r)),r},u=n.RTCPeerConnection.prototype.removeTrack,n.RTCPeerConnection.prototype.removeTrack=function(n){u.apply(this,arguments);var t=this._senders.indexOf(n);t!==-1&&this._senders.splice(t,1)}),f=n.RTCPeerConnection.prototype.addStream,n.RTCPeerConnection.prototype.addStream=function(n){var i=this;this._senders=this._senders||[];f.apply(this,[n]);n.getTracks().forEach(function(n){i._senders.push(t(i,n))})},e=n.RTCPeerConnection.prototype.removeStream,n.RTCPeerConnection.prototype.removeStream=function(n){var t=this;this._senders=this._senders||[];e.apply(this,[n]);n.getTracks().forEach(function(n){var i=t._senders.find(function(t){return t.track===n});i&&t._senders.splice(t._senders.indexOf(i),1)})}):r(n)==="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&(o=n.RTCPeerConnection.prototype.getSenders,n.RTCPeerConnection.prototype.getSenders=function(){var t=this,n=o.apply(this,[]);return n.forEach(function(n){return n._pc=t}),n},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===undefined&&(this._dtmf=this.track.kind==="audio"?this._pc.createDTMFSender(this.track):null),this._dtmf}}))}function p(n){var t,i,f,e;r(n)==="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver&&("getStats"in n.RTCRtpSender.prototype||(t=n.RTCPeerConnection.prototype.getSenders,t&&(n.RTCPeerConnection.prototype.getSenders=function(){var i=this,n=t.apply(this,[]);return n.forEach(function(n){return n._pc=i}),n}),i=n.RTCPeerConnection.prototype.addTrack,i&&(n.RTCPeerConnection.prototype.addTrack=function(){var n=i.apply(this,arguments);return n._pc=this,n}),n.RTCRtpSender.prototype.getStats=function(){var n=this;return this._pc.getStats().then(function(t){return u.filterStats(t,n.track,!0)})}),"getStats"in n.RTCRtpReceiver.prototype||(f=n.RTCPeerConnection.prototype.getReceivers,f&&(n.RTCPeerConnection.prototype.getReceivers=function(){var t=this,n=f.apply(this,[]);return n.forEach(function(n){return n._pc=t}),n}),u.wrapPeerConnectionEvent(n,"track",function(n){return n.receiver._pc=n.srcElement,n}),n.RTCRtpReceiver.prototype.getStats=function(){var n=this;return this._pc.getStats().then(function(t){return u.filterStats(t,n.track,!1)})}),"getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype)&&(e=n.RTCPeerConnection.prototype.getStats,n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){var r=arguments[0],t,i,u;return(this.getSenders().forEach(function(n){n.track===r&&(t?u=!0:t=n)}),this.getReceivers().forEach(function(n){return n.track===r&&(i?u=!0:i=n),n.track===r}),u||t&&i)?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)})}function o(n){var t,i,r,u;n.RTCPeerConnection.prototype.getLocalStreams=function(){var n=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return n._shimmedLocalStreams[t][0]})};t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(n,i){if(!i)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[i.id]?this._shimmedLocalStreams[i.id].indexOf(r)===-1&&this._shimmedLocalStreams[i.id].push(r):this._shimmedLocalStreams[i.id]=[i,r],r};i=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(n){var u=this,t,r;this._shimmedLocalStreams=this._shimmedLocalStreams||{};n.getTracks().forEach(function(n){var t=u.getSenders().find(function(t){return t.track===n});if(t)throw new DOMException("Track already exists.","InvalidAccessError");});t=this.getSenders();i.apply(this,arguments);r=this.getSenders().filter(function(n){return t.indexOf(n)===-1});this._shimmedLocalStreams[n.id]=[n].concat(r)};r=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(n){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[n.id],r.apply(this,arguments)};u=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(n){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},n&&Object.keys(this._shimmedLocalStreams).forEach(function(i){var r=t._shimmedLocalStreams[i].indexOf(n);r!==-1&&t._shimmedLocalStreams[i].splice(r,1);t._shimmedLocalStreams[i].length===1&&delete t._shimmedLocalStreams[i]}),u.apply(this,arguments)}}function w(n,t){function i(n,t){var i=t.sdp;return Object.keys(n._reverseStreams||[]).forEach(function(t){var r=n._reverseStreams[t],u=n._streams[r.id];i=i.replace(new RegExp(u.id,"g"),r.id)}),new RTCSessionDescription({type:t.type,sdp:i})}function c(n,t){var i=t.sdp;return Object.keys(n._reverseStreams||[]).forEach(function(t){var r=n._reverseStreams[t],u=n._streams[r.id];i=i.replace(new RegExp(r.id,"g"),u.id)}),new RTCSessionDescription({type:t.type,sdp:i})}var u,f,s,r,h;if(n.RTCPeerConnection){if(n.RTCPeerConnection.prototype.addTrack&&t.version>=65)return o(n);u=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){var n=this,t=u.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return n._reverseStreams[t.id]})};f=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(t){var r=this,i;this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};t.getTracks().forEach(function(n){var t=r.getSenders().find(function(t){return t.track===n});if(t)throw new DOMException("Track already exists.","InvalidAccessError");});this._reverseStreams[t.id]||(i=new n.MediaStream(t.getTracks()),this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i);f.apply(this,[t])};s=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(n){this._streams=this._streams||{};this._reverseStreams=this._reverseStreams||{};s.apply(this,[this._streams[n.id]||n]);delete this._reverseStreams[this._streams[n.id]?this._streams[n.id].id:n.id];delete this._streams[n.id]};n.RTCPeerConnection.prototype.addTrack=function(t,i){var o=this,u,e,f,r;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(u=[].slice.call(arguments,1),u.length!==1||!u[0].getTracks().find(function(n){return n===t}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(e=this.getSenders().find(function(n){return n.track===t}),e)throw new DOMException("Track already exists.","InvalidAccessError");return this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f=this._streams[i.id],f?(f.addTrack(t),Promise.resolve().then(function(){o.dispatchEvent(new Event("negotiationneeded"))})):(r=new n.MediaStream([t]),this._streams[i.id]=r,this._reverseStreams[r.id]=i,this.addStream(r)),this.getSenders().find(function(n){return n.track===t})};["createOffer","createAnswer"].forEach(function(t){var r=n.RTCPeerConnection.prototype[t],u=e({},t,function(){var t=this,n=arguments,u=arguments.length&&typeof arguments[0]=="function";return u?r.apply(this,[function(r){var u=i(t,r);n[0].apply(null,[u])},function(t){n[1]&&n[1].apply(null,t)},arguments[2]]):r.apply(this,arguments).then(function(n){return i(t,n)})});n.RTCPeerConnection.prototype[t]=u[t]});r=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?r.apply(this,arguments):(arguments[0]=c(this,arguments[0]),r.apply(this,arguments))};h=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get:function(){var n=h.get.apply(this);return n.type===""?n:i(this,n)}});n.RTCPeerConnection.prototype.removeTrack=function(n){var i=this,r,t;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!n._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(r=n._pc===this,!r)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};Object.keys(this._streams).forEach(function(r){var u=i._streams[r].getTracks().find(function(t){return n.track===t});u&&(t=i._streams[r])});t&&(t.getTracks().length===1?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(n.track),this.dispatchEvent(new Event("negotiationneeded")))}}}function b(n,t){(!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),n.RTCPeerConnection)&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=n.RTCPeerConnection.prototype[t],r=e({},t,function(){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)});n.RTCPeerConnection.prototype[t]=r[t]})}function k(n,t){u.wrapPeerConnectionEvent(n,"negotiationneeded",function(n){var i=n.target;if(!(t.version<72)&&(!i.getConfiguration||i.getConfiguration().sdpSemantics!=="plan-b")||i.signalingState==="stable")return n})}Object.defineProperty(i,"__esModule",{value:!0});i.fixNegotiationNeeded=k;i.shimAddTrackRemoveTrack=w;i.shimAddTrackRemoveTrackWithNative=o;i.shimGetSendersWithDtmf=y;Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}});i.shimMediaStream=a;i.shimOnTrack=v;i.shimPeerConnection=b;i.shimSenderReceiverGetStats=p;var u=h(n("../utils.js")),s=n("./getusermedia")},{"../utils.js":10,"./getusermedia":4}],4:[function(n,t,i){"use strict";function e(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(e=function(n){return n?i:t})(n)}function o(n,t){var u,f,s,i,o;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=r(n)&&"function"!=typeof n)return{"default":n};if(u=e(t),u&&u.has(n))return u.get(n);f={__proto__:null};s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(o=s?Object.getOwnPropertyDescriptor(n,i):null,o&&(o.get||o.set)?Object.defineProperty(f,i,o):f[i]=n[i]);return f["default"]=n,u&&u.set(n,f),f}function r(n){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function s(n,t){var i=n&&n.navigator,s;if(i.mediaDevices){var f=function(n){if(r(n)!=="object"||n.mandatory||n.optional)return n;var t={};return Object.keys(n).forEach(function(i){var u,e,f;i!=="require"&&i!=="advanced"&&i!=="mediaSource"&&(u=r(n[i])==="object"?n[i]:{ideal:n[i]},u.exact!==undefined&&typeof u.exact=="number"&&(u.min=u.max=u.exact),e=function(n,t){return n?n+t.charAt(0).toUpperCase()+t.slice(1):t==="deviceId"?"sourceId":t},u.ideal!==undefined&&(t.optional=t.optional||[],f={},typeof u.ideal=="number"?(f[e("min",i)]=u.ideal,t.optional.push(f),f={},f[e("max",i)]=u.ideal,t.optional.push(f)):(f[e("",i)]=u.ideal,t.optional.push(f))),u.exact!==undefined&&typeof u.exact!="number"?(t.mandatory=t.mandatory||{},t.mandatory[e("",i)]=u.exact):["min","max"].forEach(function(n){u[n]!==undefined&&(t.mandatory=t.mandatory||{},t.mandatory[e(n,i)]=u[n])}))}),n.advanced&&(t.optional=(t.optional||[]).concat(n.advanced)),t},e=function(n,e){var h,o,c,s;if(t.version>=61)return e(n);if(n=JSON.parse(JSON.stringify(n)),n&&r(n.audio)==="object"&&(h=function(n,t,i){t in n&&!(i in n)&&(n[i]=n[t],delete n[t])},n=JSON.parse(JSON.stringify(n)),h(n.audio,"autoGainControl","googAutoGainControl"),h(n.audio,"noiseSuppression","googNoiseSuppression"),n.audio=f(n.audio)),n&&r(n.video)==="object"){if(o=n.video.facingMode,o=o&&(r(o)==="object"?o:{ideal:o}),c=t.version<66,o&&(o.exact==="user"||o.exact==="environment"||o.ideal==="user"||o.ideal==="environment")&&!(i.mediaDevices.getSupportedConstraints&&i.mediaDevices.getSupportedConstraints().facingMode&&!c)&&(delete n.video.facingMode,o.exact==="environment"||o.ideal==="environment"?s=["back","rear"]:(o.exact==="user"||o.ideal==="user")&&(s=["front"]),s))return i.mediaDevices.enumerateDevices().then(function(t){t=t.filter(function(n){return n.kind==="videoinput"});var i=t.find(function(n){return s.some(function(t){return n.label.toLowerCase().includes(t)})});return!i&&t.length&&s.includes("back")&&(i=t[t.length-1]),i&&(n.video.deviceId=o.exact?{exact:i.deviceId}:{ideal:i.deviceId}),n.video=f(n.video),u("chrome: "+JSON.stringify(n)),e(n)});n.video=f(n.video)}return u("chrome: "+JSON.stringify(n)),e(n)},o=function(n){return t.version>=64?n:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[n.name]||n.name,message:n.message,constraint:n.constraint||n.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},h=function(n,t,r){e(n,function(n){i.webkitGetUserMedia(n,t,function(n){r&&r(o(n))})})};i.getUserMedia=h.bind(i);i.mediaDevices.getUserMedia&&(s=i.mediaDevices.getUserMedia.bind(i.mediaDevices),i.mediaDevices.getUserMedia=function(n){return e(n,function(n){return s(n).then(function(t){if(n.audio&&!t.getAudioTracks().length||n.video&&!t.getVideoTracks().length){t.getTracks().forEach(function(n){n.stop()});throw new DOMException("","NotFoundError");}return t},function(n){return Promise.reject(o(n))})})})}}var f,u;Object.defineProperty(i,"__esModule",{value:!0});i.shimGetUserMedia=s;f=o(n("../utils.js"));u=f.log},{"../utils.js":10}],5:[function(n,t,i){"use strict";function e(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(e=function(n){return n?i:t})(n)}function o(n,t){var r,f,s,i,o;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=u(n)&&"function"!=typeof n)return{"default":n};if(r=e(t),r&&r.has(n))return r.get(n);f={__proto__:null};s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(o=s?Object.getOwnPropertyDescriptor(n,i):null,o&&(o.get||o.set)?Object.defineProperty(f,i,o):f[i]=n[i]);return f["default"]=n,r&&r.set(n,f),f}function s(n){return n&&n.__esModule?n:{"default":n}}function u(n){"@babel/helpers - typeof";return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},u(n)}function h(n){if(n.RTCIceCandidate&&(!n.RTCIceCandidate||!("foundation"in n.RTCIceCandidate.prototype))){var t=n.RTCIceCandidate;n.RTCIceCandidate=function(n){var i,e,f;if(u(n)==="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){i=new t(n);e=r["default"].parseCandidate(n.candidate);for(f in e)f in i||Object.defineProperty(i,f,{value:e[f]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(n)};n.RTCIceCandidate.prototype=t.prototype;f.wrapPeerConnectionEvent(n,"icecandidate",function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new n.RTCIceCandidate(t.candidate),writable:"false"}),t})}}function c(n){!n.RTCIceCandidate||n.RTCIceCandidate&&"relayProtocol"in n.RTCIceCandidate.prototype||f.wrapPeerConnectionEvent(n,"icecandidate",function(n){if(n.candidate){var t=r["default"].parseCandidate(n.candidate.candidate);t.type==="relay"&&(n.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return n})}function l(n,t){if(n.RTCPeerConnection){"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp=="undefined"?null:this._sctp}});var i=function(n){if(!n||!n.sdp)return!1;var t=r["default"].splitSections(n.sdp);return t.shift(),t.some(function(n){var t=r["default"].parseMLine(n);return t&&t.kind==="application"&&t.protocol.indexOf("SCTP")!==-1})},u=function(n){var i=n.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/),t;return i===null||i.length<2?-1:(t=parseInt(i[1],10),t!==t?-1:t)},f=function(n){var i=65536;return t.browser==="firefox"&&(i=t.version<57?n===-1?16384:2147483637:t.version<60?t.version===57?65535:65536:2147483637),i},e=function(n,i){var u=65536,f;return t.browser==="firefox"&&t.version===57&&(u=65535),f=r["default"].matchPrefix(n.sdp,"a=max-message-size:"),f.length>0?u=parseInt(f[0].substring(19),10):t.browser==="firefox"&&i!==-1&&(u=2147483637),u},o=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){var h,c,s;if(this._sctp=null,t.browser==="chrome"&&t.version>=76&&(h=this.getConfiguration(),c=h.sdpSemantics,c==="plan-b"&&Object.defineProperty(this,"sctp",{get:function(){return typeof this._sctp=="undefined"?null:this._sctp},enumerable:!0,configurable:!0})),i(arguments[0])){var l=u(arguments[0]),n=f(l),r=e(arguments[0],l),a;a=n===0&&r===0?Number.POSITIVE_INFINITY:n===0||r===0?Math.max(n,r):Math.min(n,r);s={};Object.defineProperty(s,"maxMessageSize",{get:function(){return a}});this._sctp=s}return o.apply(this,arguments)}}}function a(n){function t(n,t){var i=n.send;n.send=function(){var r=arguments[0],u=r.length||r.size||r.byteLength;if(n.readyState==="open"&&t.sctp&&u>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}if(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype){var i=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){var n=i.apply(this,arguments);return t(n,this),n};f.wrapPeerConnectionEvent(n,"datachannel",function(n){return t(n.channel,n.target),n})}}function v(n){if(n.RTCPeerConnection&&!("connectionState"in n.RTCPeerConnection.prototype)){var t=n.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0});Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange);n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0});["setLocalDescription","setRemoteDescription"].forEach(function(n){var i=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(n){var t=n.target,i;return t._lastConnectionState!==t.connectionState&&(t._lastConnectionState=t.connectionState,i=new Event("connectionstatechange",n),t.dispatchEvent(i)),n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}}function y(n,t){if(n.RTCPeerConnection&&(t.browser!=="chrome"||!(t.version>=71))&&(t.browser!=="safari"||!(t.version>=605))){var i=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&t.sdp.indexOf("\na=extmap-allow-mixed")!==-1){var r=t.sdp.split("\n").filter(function(n){return n.trim()!=="a=extmap-allow-mixed"}).join("\n");n.RTCSessionDescription&&t instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return i.apply(this,arguments)}}}function p(n,t){if(n.RTCPeerConnection&&n.RTCPeerConnection.prototype){var i=n.RTCPeerConnection.prototype.addIceCandidate;i&&i.length!==0&&(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():i.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}function w(n){if(n.RTCPeerConnection&&n.RTCPeerConnection.prototype){var t=n.RTCPeerConnection.prototype.setLocalDescription;t&&t.length!==0&&(n.RTCPeerConnection.prototype.setLocalDescription=function(){var r=this,n=arguments[0]||{},i;if(u(n)!=="object"||n.type&&n.sdp)return t.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer"}return n.sdp||n.type!=="offer"&&n.type!=="answer"?t.apply(this,[n]):(i=n.type==="offer"?this.createOffer:this.createAnswer,i.apply(this).then(function(n){return t.apply(r,[n])}))})}}Object.defineProperty(i,"__esModule",{value:!0});i.removeExtmapAllowMixed=y;i.shimAddIceCandidateNullOrEmpty=p;i.shimConnectionState=v;i.shimMaxMessageSize=l;i.shimParameterlessSetLocalDescription=w;i.shimRTCIceCandidate=h;i.shimRTCIceCandidateRelayProtocol=c;i.shimSendThrowTypeError=a;var r=s(n("sdp")),f=o(n("./utils"))},{"./utils":10,sdp:11}],6:[function(n,t,i){"use strict";function e(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(e=function(n){return n?i:t})(n)}function h(n,t){var u,f,s,i,o;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=r(n)&&"function"!=typeof n)return{"default":n};if(u=e(t),u&&u.has(n))return u.get(n);f={__proto__:null};s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(o=s?Object.getOwnPropertyDescriptor(n,i):null,o&&(o.get||o.set)?Object.defineProperty(f,i,o):f[i]=n[i]);return f["default"]=n,u&&u.set(n,f),f}function c(n){return y(n)||v(n)||a(n)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function a(n,t){if(n){if(typeof n=="string")return u(n,t);var i=Object.prototype.toString.call(n).slice(8,-1);return(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")?Array.from(n):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(n,t):void 0}}function v(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function y(n){if(Array.isArray(n))return u(n)}function u(n,t){(t==null||t>n.length)&&(t=n.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=n[i];return r}function p(n,t,i){return t=w(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function w(n){var t=b(n,"string");return"symbol"==r(t)?t:t+""}function b(n,t){var i,u;if("object"!=r(n)||!n)return n;if(i=n[Symbol.toPrimitive],void 0!==i){if(u=i.call(n,t||"default"),"object"!=r(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(n)}function r(n){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function k(n){r(n)==="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function d(n,t){if(r(n)==="object"&&(n.RTCPeerConnection||n.mozRTCPeerConnection)){!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection);t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){var i=n.RTCPeerConnection.prototype[t],r=p({},t,function(){return arguments[0]=new(t==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)});n.RTCPeerConnection.prototype[t]=r[t]});var i={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},u=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){var n=Array.prototype.slice.call(arguments),f=n[0],r=n[1],e=n[2];return u.apply(this,[f||null]).then(function(n){if(t.version<53&&!r)try{n.forEach(function(n){n.type=i[n.type]||n.type})}catch(u){if(u.name!=="TypeError")throw u;n.forEach(function(t,r){n.set(r,Object.assign({},t,{type:i[t.type]||t.type}))})}return n}).then(r,e)}}}function g(n){var t,i;r(n)==="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&(n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype||(t=n.RTCPeerConnection.prototype.getSenders,t&&(n.RTCPeerConnection.prototype.getSenders=function(){var i=this,n=t.apply(this,[]);return n.forEach(function(n){return n._pc=i}),n}),i=n.RTCPeerConnection.prototype.addTrack,i&&(n.RTCPeerConnection.prototype.addTrack=function(){var n=i.apply(this,arguments);return n._pc=this,n}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}))}function nt(n){if(r(n)==="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&(!n.RTCRtpSender||!("getStats"in n.RTCRtpReceiver.prototype))){var t=n.RTCPeerConnection.prototype.getReceivers;t&&(n.RTCPeerConnection.prototype.getReceivers=function(){var i=this,n=t.apply(this,[]);return n.forEach(function(n){return n._pc=i}),n});f.wrapPeerConnectionEvent(n,"track",function(n){return n.receiver._pc=n.srcElement,n});n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function tt(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(n){var t=this;f.deprecated("removeStream","removeTrack");this.getSenders().forEach(function(i){i.track&&n.getTracks().includes(i.track)&&t.removeTrack(i)})})}function it(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function rt(n){if(r(n)==="object"&&n.RTCPeerConnection){var t=n.RTCPeerConnection.prototype.addTransceiver;t&&(n.RTCPeerConnection.prototype.addTransceiver=function(){var n,u,f,i,r;return this.setParametersPromises=[],n=arguments[1]&&arguments[1].sendEncodings,n===undefined&&(n=[]),n=c(n),u=n.length>0,u&&n.forEach(function(n){if("rid"in n)if(!/^[a-z0-9]{0,16}$/i.test(n.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in n&&!(parseFloat(n.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in n&&!(parseFloat(n.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0");}),f=t.apply(this,arguments),u&&(i=f.sender,r=i.getParameters(),"encodings"in r&&(r.encodings.length!==1||Object.keys(r.encodings[0]).length!==0)||(r.encodings=n,i.sendEncodings=n,this.setParametersPromises.push(i.setParameters(r).then(function(){delete i.sendEncodings})["catch"](function(){delete i.sendEncodings})))),f})}}function ut(n){if(r(n)==="object"&&n.RTCRtpSender){var t=n.RTCRtpSender.prototype.getParameters;t&&(n.RTCRtpSender.prototype.getParameters=function(){var n=t.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}}function ft(n){if(r(n)==="object"&&n.RTCPeerConnection){var t=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){var i=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,i)})["finally"](function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}function et(n){if(r(n)==="object"&&n.RTCPeerConnection){var t=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){var i=arguments,n=this;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(function(){return t.apply(n,i)})["finally"](function(){n.setParametersPromises=[]}):t.apply(this,arguments)}}}Object.defineProperty(i,"__esModule",{value:!0});i.shimAddTransceiver=rt;i.shimCreateAnswer=et;i.shimCreateOffer=ft;Object.defineProperty(i,"shimGetDisplayMedia",{enumerable:!0,get:function(){return s.shimGetDisplayMedia}});i.shimGetParameters=ut;Object.defineProperty(i,"shimGetUserMedia",{enumerable:!0,get:function(){return o.shimGetUserMedia}});i.shimOnTrack=k;i.shimPeerConnection=d;i.shimRTCDataChannel=it;i.shimReceiverGetStats=nt;i.shimRemoveStream=tt;i.shimSenderGetStats=g;var f=h(n("../utils")),o=n("./getusermedia"),s=n("./getdisplaymedia")},{"../utils":10,"./getdisplaymedia":7,"./getusermedia":8}],7:[function(n,t,i){"use strict";function r(n,t){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||n.navigator.mediaDevices&&(n.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:t}:i.video.mediaSource=t,n.navigator.mediaDevices.getUserMedia(i)})}Object.defineProperty(i,"__esModule",{value:!0});i.shimGetDisplayMedia=r},{}],8:[function(n,t,i){"use strict";function u(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(u=function(n){return n?i:t})(n)}function e(n,t){var f,e,s,i,o;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=r(n)&&"function"!=typeof n)return{"default":n};if(f=u(t),f&&f.has(n))return f.get(n);e={__proto__:null};s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(o=s?Object.getOwnPropertyDescriptor(n,i):null,o&&(o.get||o.set)?Object.defineProperty(e,i,o):e[i]=n[i]);return e["default"]=n,f&&f.set(n,e),e}function r(n){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function o(n,t){var e=n&&n.navigator,i=n&&n.MediaStreamTrack,u,o,s,h;e.getUserMedia=function(n,t,i){f.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia");e.mediaDevices.getUserMedia(n).then(t,i)};t.version>55&&"autoGainControl"in e.mediaDevices.getSupportedConstraints()||(u=function(n,t,i){t in n&&!(i in n)&&(n[i]=n[t],delete n[t])},o=e.mediaDevices.getUserMedia.bind(e.mediaDevices),e.mediaDevices.getUserMedia=function(n){return r(n)==="object"&&r(n.audio)==="object"&&(n=JSON.parse(JSON.stringify(n)),u(n.audio,"autoGainControl","mozAutoGainControl"),u(n.audio,"noiseSuppression","mozNoiseSuppression")),o(n)},i&&i.prototype.getSettings&&(s=i.prototype.getSettings,i.prototype.getSettings=function(){var n=s.apply(this,arguments);return u(n,"mozAutoGainControl","autoGainControl"),u(n,"mozNoiseSuppression","noiseSuppression"),n}),i&&i.prototype.applyConstraints&&(h=i.prototype.applyConstraints,i.prototype.applyConstraints=function(n){return this.kind==="audio"&&r(n)==="object"&&(n=JSON.parse(JSON.stringify(n)),u(n,"autoGainControl","mozAutoGainControl"),u(n,"noiseSuppression","mozNoiseSuppression")),h.apply(this,[n])}))}Object.defineProperty(i,"__esModule",{value:!0});i.shimGetUserMedia=o;var f=e(n("../utils"))},{"../utils":10}],9:[function(n,t,i){"use strict";function f(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(f=function(n){return n?i:t})(n)}function o(n,t){var u,e,s,i,o;if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=r(n)&&"function"!=typeof n)return{"default":n};if(u=f(t),u&&u.has(n))return u.get(n);e={__proto__:null};s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in n)"default"!==i&&{}.hasOwnProperty.call(n,i)&&(o=s?Object.getOwnPropertyDescriptor(n,i):null,o&&(o.get||o.set)?Object.defineProperty(e,i,o):e[i]=n[i]);return e["default"]=n,u&&u.set(n,e),e}function r(n){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function s(n){if(r(n)==="object"&&n.RTCPeerConnection){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){var t=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(n){var i=this;this._localStreams||(this._localStreams=[]);this._localStreams.includes(n)||this._localStreams.push(n);n.getAudioTracks().forEach(function(r){return t.call(i,r,n)});n.getVideoTracks().forEach(function(r){return t.call(i,r,n)})};n.RTCPeerConnection.prototype.addTrack=function(){for(var n=this,r=arguments.length,u=new Array(r>1?r-1:0),i=1;i<r;i++)u[i-1]=arguments[i];return u&&u.forEach(function(t){n._localStreams?n._localStreams.includes(t)||n._localStreams.push(t):n._localStreams=[t]}),t.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(n){var r=this,t,i;(this._localStreams||(this._localStreams=[]),t=this._localStreams.indexOf(n),t!==-1)&&(this._localStreams.splice(t,1),i=n.getTracks(),this.getSenders().forEach(function(n){i.includes(n.track)&&r.removeTrack(n)}))})}}function h(n){if(r(n)==="object"&&n.RTCPeerConnection&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(n){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly));this.addEventListener("addstream",this._onaddstream=n);this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(function(n){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(n)){t._remoteStreams.push(n);var i=new Event("addstream");i.stream=n;t.dispatchEvent(i)}})})}});var t=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(n._remoteStreams||(n._remoteStreams=[]),!(n._remoteStreams.indexOf(t)>=0)){n._remoteStreams.push(t);var i=new Event("addstream");i.stream=t;n.dispatchEvent(i)}})}),t.apply(n,arguments)}}}function c(n){var i;if(r(n)==="object"&&n.RTCPeerConnection){var t=n.RTCPeerConnection.prototype,u=t.createOffer,f=t.createAnswer,e=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(n,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=u.apply(this,[r]);return t?(i.then(n,t),Promise.resolve()):i};t.createAnswer=function(n,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=f.apply(this,[r]);return t?(i.then(n,t),Promise.resolve()):i};i=function(n,t,i){var r=e.apply(this,[n]);return i?(r.then(t,i),Promise.resolve()):r};t.setLocalDescription=i;i=function(n,t,i){var r=o.apply(this,[n]);return i?(r.then(t,i),Promise.resolve()):r};t.setRemoteDescription=i;i=function(n,t,i){var r=s.apply(this,[n]);return i?(r.then(t,i),Promise.resolve()):r};t.addIceCandidate=i}}function l(n){var t=n&&n.navigator,i,r;t.mediaDevices&&t.mediaDevices.getUserMedia&&(i=t.mediaDevices,r=i.getUserMedia.bind(i),t.mediaDevices.getUserMedia=function(n){return r(e(n))});!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(n,i,r){t.mediaDevices.getUserMedia(n).then(i,r)}.bind(t))}function e(n){return n&&n.video!==undefined?Object.assign({},n,{video:u.compactObject(n.video)}):n}function a(n){if(n.RTCPeerConnection){var t=n.RTCPeerConnection;n.RTCPeerConnection=function(n,i){var e,f,r;if(n&&n.iceServers){for(e=[],f=0;f<n.iceServers.length;f++)r=n.iceServers[f],r.urls===undefined&&r.url?(u.deprecated("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,e.push(r)):e.push(n.iceServers[f]);n.iceServers=e}return new t(n,i)};n.RTCPeerConnection.prototype=t.prototype;"generateCertificate"in t&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function v(n){r(n)==="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function y(n){var t=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(n){var i,r;return n&&(typeof n.offerToReceiveAudio!="undefined"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio),i=this.getTransceivers().find(function(n){return n.receiver.track.kind==="audio"}),n.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):n.offerToReceiveAudio!==!0||i||this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo!="undefined"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo),r=this.getTransceivers().find(function(n){return n.receiver.track.kind==="video"}),n.offerToReceiveVideo===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):n.offerToReceiveVideo!==!0||r||this.addTransceiver("video",{direction:"recvonly"})),t.apply(this,arguments)}}function p(n){r(n)!=="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}Object.defineProperty(i,"__esModule",{value:!0});i.shimAudioContext=p;i.shimCallbacksAPI=c;i.shimConstraints=e;i.shimCreateOfferLegacy=y;i.shimGetUserMedia=l;i.shimLocalStreamsAPI=s;i.shimRTCIceServerUrls=a;i.shimRemoteStreamsAPI=h;i.shimTrackEventTransceiver=v;var u=o(n("../utils"))},{"../utils":10}],10:[function(n,t,i){"use strict";function c(n,t,i){return t=l(t),t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function l(n){var t=a(n,"string");return"symbol"==r(t)?t:t+""}function a(n,t){var i,u;if("object"!=r(n)||!n)return n;if(i=n[Symbol.toPrimitive],void 0!==i){if(u=i.call(n,t||"default"),"object"!=r(u))return u;throw new TypeError("@@toPrimitive must return a primitive value.");}return("string"===t?String:Number)(n)}function r(n){"@babel/helpers - typeof";return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r(n)}function u(n,t,i){var r=n.match(t);return r&&r.length>=i&&parseInt(r[i],10)}function v(n,t,i){var r,f,u;n.RTCPeerConnection&&(r=n.RTCPeerConnection.prototype,f=r.addEventListener,r.addEventListener=function(n,r){if(n!==t)return f.apply(this,arguments);var u=function(n){var t=i(n);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,u),f.apply(this,[n,u])},u=r.removeEventListener,r.removeEventListener=function(n,i){if(n!==t||!this._eventMap||!this._eventMap[t]||!this._eventMap[t].has(i))return u.apply(this,arguments);var r=this._eventMap[t].get(i);return this._eventMap[t]["delete"](i),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,u.apply(this,[n,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(n){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]);n&&this.addEventListener(t,this["_on"+t]=n)},enumerable:!0,configurable:!0}))}function y(n){return typeof n!="boolean"?new Error("Argument type: "+r(n)+". Please use a boolean."):(e=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function p(n){return typeof n!="boolean"?new Error("Argument type: "+r(n)+". Please use a boolean."):(o=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function w(){if((typeof window=="undefined"?"undefined":r(window))==="object"){if(e)return;typeof console!="undefined"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function b(n,t){o&&console.warn(n+" is deprecated, please use "+t+" instead.")}function k(n){var t={browser:null,version:null},i,r;if(typeof n=="undefined"||!n.navigator||!n.navigator.userAgent)return t.browser="Not a browser.",t;if(i=n.navigator,i.userAgentData&&i.userAgentData.brands&&(r=i.userAgentData.brands.find(function(n){return n.brand==="Chromium"}),r))return{browser:"chrome",version:parseInt(r.version,10)};if(i.mozGetUserMedia)t.browser="firefox",t.version=u(i.userAgent,/Firefox\/(\d+)\./,1);else if(i.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)t.browser="chrome",t.version=u(i.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&i.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=u(i.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function s(n){return Object.prototype.toString.call(n)==="[object Object]"}function h(n){return s(n)?Object.keys(n).reduce(function(t,i){var u=s(n[i]),r=u?h(n[i]):n[i],f=u&&!Object.keys(r).length;return r===undefined||f?t:Object.assign(t,c({},i,r))},{}):n}function f(n,t,i){t&&!i.has(t.id)&&(i.set(t.id,t),Object.keys(t).forEach(function(r){r.endsWith("Id")?f(n,n.get(t[r]),i):r.endsWith("Ids")&&t[r].forEach(function(t){f(n,n.get(t),i)})}))}function d(n,t,i){var e=i?"outbound-rtp":"inbound-rtp",r=new Map,u;return t===null?r:(u=[],n.forEach(function(n){n.type==="track"&&n.trackIdentifier===t.id&&u.push(n)}),u.forEach(function(t){n.forEach(function(i){i.type===e&&i.trackId===t.id&&f(n,i,r)})}),r)}Object.defineProperty(i,"__esModule",{value:!0});i.compactObject=h;i.deprecated=b;i.detectBrowser=k;i.disableLog=y;i.disableWarnings=p;i.extractVersion=u;i.filterStats=d;i.log=w;i.walkStats=f;i.wrapPeerConnectionEvent=v;var e=!0,o=!0},{}],11:[function(n,t){"use strict";var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},i={};i.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)};i.localCName=i.generateIdentifier();i.splitLines=function(n){return n.trim().split("\n").map(function(n){return n.trim()})};i.splitSections=function(n){var t=n.split("\nm=");return t.map(function(n,t){return(t>0?"m="+n:n).trim()+"\r\n"})};i.getDescription=function(n){var t=i.splitSections(n);return t&&t[0]};i.getMediaSections=function(n){var t=i.splitSections(n);return t.shift(),t};i.matchPrefix=function(n,t){return i.splitLines(n).filter(function(n){return n.indexOf(t)===0})};i.parseCandidate=function(n){var t=void 0,r,i;for(t=n.indexOf("a=candidate:")===0?n.substring(12).split(" "):n.substring(10).split(" "),r={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":r.relatedAddress=t[i+1];break;case"rport":r.relatedPort=parseInt(t[i+1],10);break;case"tcptype":r.tcpType=t[i+1];break;case"ufrag":r.ufrag=t[i+1];r.usernameFragment=t[i+1];break;default:r[t[i]]===undefined&&(r[t[i]]=t[i+1])}return r};i.writeCandidate=function(n){var t=[],i,r;return t.push(n.foundation),i=n.component,i==="rtp"?t.push(1):i==="rtcp"?t.push(2):t.push(i),t.push(n.protocol.toUpperCase()),t.push(n.priority),t.push(n.address||n.ip),t.push(n.port),r=n.type,t.push("typ"),t.push(r),r!=="host"&&n.relatedAddress&&n.relatedPort&&(t.push("raddr"),t.push(n.relatedAddress),t.push("rport"),t.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(t.push("ufrag"),t.push(n.usernameFragment||n.ufrag)),"candidate:"+t.join(" ")};i.parseIceOptions=function(n){return n.substring(14).split(" ")};i.parseRtpMap=function(n){var t=n.substring(9).split(" "),i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=t.length===3?parseInt(t[2],10):1,i.numChannels=i.channels,i};i.writeRtpMap=function(n){var i=n.payloadType,t;return n.preferredPayloadType!==undefined&&(i=n.preferredPayloadType),t=n.channels||n.numChannels||1,"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(t!==1?"/"+t:"")+"\r\n"};i.parseExtmap=function(n){var t=n.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}};i.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+"\r\n"};i.parseFmtp=function(n){for(var r={},t=void 0,u=n.substring(n.indexOf(" ")+1).split(";"),i=0;i<u.length;i++)t=u[i].trim().split("="),r[t[0].trim()]=t[1];return r};i.writeFmtp=function(n){var i="",r=n.payloadType,t;return n.preferredPayloadType!==undefined&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length&&(t=[],Object.keys(n.parameters).forEach(function(i){n.parameters[i]!==undefined?t.push(i+"="+n.parameters[i]):t.push(i)}),i+="a=fmtp:"+r+" "+t.join(";")+"\r\n"),i};i.parseRtcpFb=function(n){var t=n.substring(n.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}};i.writeRtcpFb=function(n){var t="",i=n.payloadType;return n.preferredPayloadType!==undefined&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(n){t+="a=rtcp-fb:"+i+" "+n.type+(n.parameter&&n.parameter.length?" "+n.parameter:"")+"\r\n"}),t};i.parseSsrcMedia=function(n){var t=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,t),10)},r=n.indexOf(":",t);return r>-1?(i.attribute=n.substring(t+1,r),i.value=n.substring(r+1)):i.attribute=n.substring(t+1),i};i.parseSsrcGroup=function(n){var t=n.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(n){return parseInt(n,10)})}};i.getMid=function(n){var t=i.matchPrefix(n,"a=mid:")[0];if(t)return t.substring(6)};i.parseFingerprint=function(n){var t=n.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}};i.getDtlsParameters=function(n,t){var r=i.matchPrefix(n+t,"a=fingerprint:");return{role:"auto",fingerprints:r.map(i.parseFingerprint)}};i.writeDtlsParameters=function(n,t){var i="a=setup:"+t+"\r\n";return n.fingerprints.forEach(function(n){i+="a=fingerprint:"+n.algorithm+" "+n.value+"\r\n"}),i};i.parseCryptoLine=function(n){var t=n.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}};i.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(r(n.keyParams)==="object"?i.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+"\r\n"};i.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var t=n.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:undefined,mkiLength:t[2]?t[2].split(":")[1]:undefined}};i.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")};i.getCryptoParameters=function(n,t){var r=i.matchPrefix(n+t,"a=crypto:");return r.map(i.parseCryptoLine)};i.getIceParameters=function(n,t){var r=i.matchPrefix(n+t,"a=ice-ufrag:")[0],u=i.matchPrefix(n+t,"a=ice-pwd:")[0];return(r&&u)?{usernameFragment:r.substring(12),password:u.substring(10)}:null};i.writeIceParameters=function(n){var t="a=ice-ufrag:"+n.usernameFragment+"\r\na=ice-pwd:"+n.password+"\r\n";return n.iceLite&&(t+="a=ice-lite\r\n"),t};i.parseRtpParameters=function(n){var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=i.splitLines(n),e=c[0].split(" "),u,f,o,r,s,h;for(t.profile=e[2],u=3;u<e.length;u++)if(f=e[u],o=i.matchPrefix(n,"a=rtpmap:"+f+" ")[0],o){r=i.parseRtpMap(o);s=i.matchPrefix(n,"a=fmtp:"+f+" ");r.parameters=s.length?i.parseFmtp(s[0]):{};r.rtcpFeedback=i.matchPrefix(n,"a=rtcp-fb:"+f+" ").map(i.parseRtcpFb);t.codecs.push(r);switch(r.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(r.name.toUpperCase())}}return i.matchPrefix(n,"a=extmap:").forEach(function(n){t.headerExtensions.push(i.parseExtmap(n))}),h=i.matchPrefix(n,"a=rtcp-fb:* ").map(i.parseRtcpFb),t.codecs.forEach(function(n){h.forEach(function(t){var i=n.rtcpFeedback.find(function(n){return n.type===t.type&&n.parameter===t.parameter});i||n.rtcpFeedback.push(t)})}),t};i.writeRtpDescription=function(n,t){var r="",u;return r+="m="+n+" ",r+=t.codecs.length>0?"9":"0",r+=" "+(t.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=t.codecs.map(function(n){return n.preferredPayloadType!==undefined?n.preferredPayloadType:n.payloadType}).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach(function(n){r+=i.writeRtpMap(n);r+=i.writeFmtp(n);r+=i.writeRtcpFb(n)}),u=0,t.codecs.forEach(function(n){n.maxptime>u&&(u=n.maxptime)}),u>0&&(r+="a=maxptime:"+u+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach(function(n){r+=i.writeExtmap(n)}),r};i.parseRtpEncodingParameters=function(n){var r=[],e=i.parseRtpParameters(n),h=e.fecMechanisms.indexOf("RED")!==-1,c=e.fecMechanisms.indexOf("ULPFEC")!==-1,s=i.matchPrefix(n,"a=ssrc:").map(function(n){return i.parseSsrcMedia(n)}).filter(function(n){return n.attribute==="cname"}),u=s.length>0&&s[0].ssrc,o=void 0,f=i.matchPrefix(n,"a=ssrc-group:FID").map(function(n){var t=n.substring(17).split(" ");return t.map(function(n){return parseInt(n,10)})}),t;return f.length>0&&f[0].length>1&&f[0][0]===u&&(o=f[0][1]),e.codecs.forEach(function(n){if(n.name.toUpperCase()==="RTX"&&n.parameters.apt){var t={ssrc:u,codecPayloadType:parseInt(n.parameters.apt,10)};u&&o&&(t.rtx={ssrc:o});r.push(t);h&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:u,mechanism:c?"red+ulpfec":"red"},r.push(t))}}),r.length===0&&u&&r.push({ssrc:u}),t=i.matchPrefix(n,"b="),t.length&&(t=t[0].indexOf("b=TIAS:")===0?parseInt(t[0].substring(7),10):t[0].indexOf("b=AS:")===0?parseInt(t[0].substring(5),10)*1e3*.95-16e3:undefined,r.forEach(function(n){n.maxBitrate=t})),r};i.parseRtcpParameters=function(n){var t={},r=i.matchPrefix(n,"a=ssrc:").map(function(n){return i.parseSsrcMedia(n)}).filter(function(n){return n.attribute==="cname"})[0],u,f;return r&&(t.cname=r.value,t.ssrc=r.ssrc),u=i.matchPrefix(n,"a=rtcp-rsize"),t.reducedSize=u.length>0,t.compound=u.length===0,f=i.matchPrefix(n,"a=rtcp-mux"),t.mux=f.length>0,t};i.writeRtcpParameters=function(n){var t="";return n.reducedSize&&(t+="a=rtcp-rsize\r\n"),n.mux&&(t+="a=rtcp-mux\r\n"),n.ssrc!==undefined&&n.cname&&(t+="a=ssrc:"+n.ssrc+" cname:"+n.cname+"\r\n"),t};i.parseMsid=function(n){var t=void 0,u=i.matchPrefix(n,"a=msid:"),r;return u.length===1?(t=u[0].substring(7).split(" "),{stream:t[0],track:t[1]}):(r=i.matchPrefix(n,"a=ssrc:").map(function(n){return i.parseSsrcMedia(n)}).filter(function(n){return n.attribute==="msid"}),r.length>0?(t=r[0].value.split(" "),{stream:t[0],track:t[1]}):void 0)};i.parseSctpDescription=function(n){var o=i.parseMLine(n),e=i.matchPrefix(n,"a=max-message-size:"),t=void 0,r,u,f;return(e.length>0&&(t=parseInt(e[0].substring(19),10)),isNaN(t)&&(t=65536),r=i.matchPrefix(n,"a=sctp-port:"),r.length>0)?{port:parseInt(r[0].substring(12),10),protocol:o.fmt,maxMessageSize:t}:(u=i.matchPrefix(n,"a=sctpmap:"),u.length>0?(f=u[0].substring(10).split(" "),{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:t}):void 0)};i.writeSctpDescription=function(n,t){var i=[];return i=n.protocol!=="DTLS/SCTP"?["m="+n.kind+" 9 "+n.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+n.kind+" 9 "+n.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],t.maxMessageSize!==undefined&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")};i.generateSessionId=function(){return Math.random().toString().substr(2,22)};i.writeSessionBoilerplate=function(n,t,r){var u=void 0,e=t!==undefined?t:2,f;return u=n?n:i.generateSessionId(),f=r||"thisisadapterortc","v=0\r\no="+f+" "+u+" "+e+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"};i.getDirection=function(n,t){for(var u=i.splitLines(n),r=0;r<u.length;r++)switch(u[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return u[r].substring(2)}return t?i.getDirection(t):"sendrecv"};i.getKind=function(n){var t=i.splitLines(n),r=t[0].split(" ");return r[0].substring(2)};i.isRejected=function(n){return n.split(" ",2)[1]==="0"};i.parseMLine=function(n){var r=i.splitLines(n),t=r[0].substring(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}};i.parseOLine=function(n){var r=i.matchPrefix(n,"o=")[0],t=r.substring(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}};i.isValidSDP=function(n){var r,t;if(typeof n!="string"||n.length===0)return!1;for(r=i.splitLines(n),t=0;t<r.length;t++)if(r[t].length<2||r[t].charAt(1)!=="=")return!1;return!0};(typeof t=="undefined"?"undefined":r(t))==="object"&&(t.exports=i)},{}]},{},[1])(1)});