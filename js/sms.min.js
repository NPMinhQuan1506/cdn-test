function SMSSYS_Pending(n,t,i,r,u,f,e,o,s,h,c){try{i=xoa_dau(i);AjaxJWT(url="/api/SMS/Pending",data=JSON.stringify({content:i,phone:t,amount:r,customerID:n,ticketID:e,appID:o,studentID:s,typecare:f,znssms:h}),async=!0,success=function(n){if(n!=="0"){let t=Number(n);typeof c=="function"&&c(t)}})}catch(l){}}function SMSSYS_ActionSend(n,t,i,r,u,f,e,o,s,h){try{AjaxJWT(url="/api/SMS/Send",data=JSON.stringify({Phone:t,Content:i,Brandname:u,znssms:f,IsSign:n,CallbackID:e,CallbackUrl:""}),async=!0,success=function(n){n==="1"?(u!==""?syslog_sms("i",t,u+": "+i):syslog_sms("i",t,i),typeof o=="function"&&o()):n==="-1"?typeof h=="function"&&h():typeof s=="function"&&s()})}catch(c){}}function SMSSYS_MultiAction(n,t,i=0,r,u){try{AjaxJWT(url="/api/SMS/SendMulti?ver="+RandomNumber(),data=JSON.stringify({SmsItem:n,BrandName:t,IsZns:i,CallbackMultiUrl:""}),async=!0,success=function(n){n==="1"?typeof r=="function"&&r():n==="-1"?typeof _bannedfunc=="function"&&_bannedfunc():typeof u=="function"&&u()})}catch(f){}}function SMSSYS_Getlog(n,t,i,r,u,f,e){try{AjaxJWT(url="/api/SMS/SMSGetLog",data=JSON.stringify({znssms:u,template_id:r,from_time:i,page:t,limit:n}),async=!0,success=function(n){n!="0"?typeof f=="function"&&f(n):typeof e=="function"&&e()})}catch(o){}}function MainCust_AfterChangeCard(n,t){if(t!=undefined&&t.length!=0)for(let i=0;i<t.length;i++)if(t[i].data_card_using!=""){let r=JSON.parse(t[i].data_card_using);r!=undefined&&r.length>0&&SMSSYS_CardAfterChange(n,0-r[0].Amount,r[0].CardID)}}async function SMSSYS_CardAfterChange(n,t,i){return new Promise(()=>{AjaxJWT(url="/api/SMS/afterChange",data=JSON.stringify({customerid:n,amount:formatNumber(t),cardid:i,smscurbrand:SMSCurBrandName!=undefined?SMSCurBrandName.toLowerCase():"",templatetype:sys_SMSTEMPLATE.CARD}),async=!0,success=function(){})})}async function SMSSYS_AfterPaid(n,t){return new Promise(()=>{let{PaymentID:i=0,PaymentCardID:r=0,PaymentMedID:u=0,CardID:f=0,DepositID:e=0,MedicineID:o=0,TabID:s=0}=t;AjaxJWT(url="/api/SMS/afterPaid",data=JSON.stringify({customerid:n,paymentid:i,paymentcardid:r,paymentmedid:u,depositid:e,tabid:s,cardid:f,medicineid:o,stupaymentid:0,smscurbrand:SMSCurBrandName!=undefined?SMSCurBrandName.toLowerCase():"",templatetype:sys_SMSTEMPLATE.PAYMENT}),async=!0,success=function(){})})}async function SMSSYS_AfterApp(n,t){return new Promise(i=>{AjaxJWT(url="/api/SMS/afterAppointment",data=JSON.stringify({customerid:n,appid:t,smscurbrand:SMSCurBrandName!=undefined?SMSCurBrandName.toLowerCase():"",templatetype:sys_SMSTEMPLATE.APPOINTMENT}),async=!0,success=function(){i()})})}var sys_SMSTEMPLATE={PAYMENT:"SMSContentAfterPayment",CARD:"SMSContentAfterCashback",APPOINTMENT:"SMSContentAfterAppointment"};