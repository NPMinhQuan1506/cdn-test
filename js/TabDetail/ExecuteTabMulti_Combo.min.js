function onClickKeyComboTab_Search(n){n.preventDefault();n.stopPropagation();dataServiceCombo!=undefined&&dataServiceCombo!=null?(Render_Customer_Service_Combo_Div(DataService,dataServiceCombo,"tabservice_combo_table_Body"),$("#tabservice_combo_result").addClass("active"),Event_SearchRowComboService_Div()):$("#tabservice_combo_result").removeClass("active")}function onKeyupTab_Combo_Search(){return new Promise(n=>{setTimeout(()=>{let r=$("#tabservice_combo_input").val(),t=xoa_dau(r).trim().toLowerCase(),i=dataServiceCombo.filter(function(n){let i=xoa_dau(n.ComboName).toLowerCase();return i.includes(t)?!0:!1}).sort((n,i)=>n.ComboName.toLowerCase().indexOf(t)>i.ComboName.toLowerCase().indexOf(t)?1:n.ComboName.toLowerCase().indexOf(t)<i.ComboName.toLowerCase().indexOf(t)?-1:n.ComboName>i.ComboName?1:-1);i!=undefined&&i!=null?(Render_Customer_Service_Combo_Div(DataService,i,"tabservice_combo_table_Body"),$("#tabservice_combo_table_Body").show(),Event_SearchRowComboService_Div()):$("#tabservice_combo_table_Body").hide();ColorSearchFilterText_Combo(r,".seachRowComboServicediv");n()})})}function Event_SearchRowComboService_Div(){$(".rowcombotabservice").on("click",function(){let t="",i=$(this).attr("data-value"),n=dataServiceCombo.filter(function(n){return Number(n.ID)==Number(i)?!0:!1});n!=undefined&&n!=null&&n.length==1&&($("#tabservice_combo_input").val(n[0].ComboName),t=n[0].ListService,CurrentTabCombo_Choose=i,CurrentTabCombo_IsNotChangeAllow=n[0]?.IsNotChangeAllow??0);OnChange_ComboServices(t);$("#tabservice_combo_result").removeClass("active")})}function OnChange_ComboServices(n){let i=JSON.parse(n),t=data_service_root.filter(n=>i[n.ID]);t!=undefined&&t.length!=0?($("#service_list_combo").show(),Render_Customer_Service_Div_From_Combo(t,i,"tabservice_from_combo_Body"),Event_ClickDetailRowComboService_Div()):$("#service_list_combo").hide()}function Event_ClickDetailRowComboService_Div(){$(".rowCombotabservice").on("click",function(){let u=$(this).attr("data-value");CurrentService_Choose=u;$(this).addClass("selected").siblings().removeClass("selected");isUsingTabComboService=1;OnChange_Services();isUsingTabComboService=1;CurrentServiceTabCombo_Choose=CurrentTabCombo_Choose;let t=$(this).attr("data-percent"),i=$(this).attr("data-amount"),r=$(this).attr("data-times"),n=$(this).attr("data-quantity");Number(n)!=0&&sys_DentistCosmetic==0&&$("#Tab_Service_Quantity").val(n);Number(r)!=0&&sys_DentistCosmetic==0&&$("#service_timetotreat").val(Number(r)*Number(n));Number(i)!=0?($("#DiscountAmountPer").dropdown("set selected",2),$("#txtDiscountAmountPer").val(i)):Number(t)!=0&&($("#DiscountAmountPer").dropdown("set selected",1),$("#txtDiscountAmountPer").val(t))})}