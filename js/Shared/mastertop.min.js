function MS_MainEvent(){$("#MS_FilterAct .filter").unbind().click(function(){$("#MS_FilterAct .filter").removeClass("active");$(this).addClass("active");let n=$(this).attr("data-filter");n==1?$("#MS_NotiContent").addClass("unreadonly"):$("#MS_NotiContent").removeClass("unreadonly")});$("#MS_NotiClear").click(function(){MS_NotiUpdateRead(-1,0);$(".ms_notiitem").remove();$("#MS_NotiContent hr").remove()});$("#MS_NotiReadAll").click(function(){MS_NotiUpdateRead(1,0);$(".ms_notiitem").removeClass("unread");$("#MS_NotiTotal").html("0");$("#MS_NotiTotal").parent().removeClass("notiRing")});$("#MS_NotiSysReadAll").click(function(){MS_NotiSysUpdateRead(0);$("#MS_NotiSysTotal").parent().removeClass("notiRing");$("#MS_NotiSysTotal").addClass("unread");$(".ms_notiitemsys").removeClass("unread")});$(document).on("mousedown",function(n){let t=$("#MS_SearchMainResult");$(t).is(n.target)||$(t).has(n.target).length!==0||$("#MS_SearchMainResult").hide();let i=$("#MS_NotiArea");$(i).is(n.target)||$(i).has(n.target).length!==0||$("#MS_NotiArea").hide();let r=$("#MS_NotiAreaSys");$(r).is(n.target)||$(r).has(n.target).length!==0||$("#MS_NotiAreaSys").hide();let u=$("#MS_PopupArea");$(u).is(n.target)||$(u).has(n.target).length!==0||$("#MS_PopupArea").hide();let f=$("#MS_MinialArea");$(f).is(n.target)||$(f).has(n.target).length!==0||$("#MS_MinialArea").hide();let e=$("#MS_LanguageArea");$(e).is(n.target)||$(e).has(n.target).length!==0||$("#MS_LanguageArea").hide()});$("#Master_Top .MS_DashboardDetail").click(function(){window.location.href="/Dash/Dash_Master?ver="+versionofWebApplication});$(".title-popup").popup({transition:"scale up",position:"right center"});$("#MS_PopupLanguage").on("click",".flag-item",function(){let n=$(this).attr("data-value");MS_ChangeLanguage(n)})}function MS_PopupUserShow(){let n=MS_GET_Position_Popup($("#MS_PopupArea").parent(),$("#MS_PopupArea"));$("#MS_PopupArea").css({display:"block",top:n.top+10,left:n.left-30,width:n.width!=undefined?n.width:""}).animate({top:n.top+20},300);event.stopPropagation()}function MS_MinialShow(){let n=MS_GET_Position_Popup($("#MS_MinialArea").parent(),$("#MS_MinialArea"));$("#MS_MinialArea").css({display:"block",top:n.top+10,left:n.left-30,width:n.width!=undefined?n.width:""}).animate({top:n.top+20},300);event.stopPropagation()}function MS_PopupFillData(){$("#MS_PopupAvatar").attr({src:Master_circleAvatar,title:sys_userName_Main});$("#MS_PopupName").html(sys_userName_Main);$("#MS_PopupGroupName").html(Master_roleGroupCurrent);$("#MS_PopupEmpName").html(sys_employeeName_Main)}function MS_SearchText(n){try{return removeSpecChar(xoa_dau(n)).toLowerCase()}catch(t){return""}}function levenshteinDistance(n,t){const r=n.length,u=t.length,i=Array(r+1).fill(null).map(()=>Array(u+1).fill(0));for(let n=0;n<=r;n++)i[n][0]=n;for(let n=0;n<=u;n++)i[0][n]=n;for(let f=1;f<=r;f++)for(let r=1;r<=u;r++){const u=n[f-1]===t[r-1]?0:1;i[f][r]=Math.min(i[f-1][r]+1,i[f][r-1]+1,i[f-1][r-1]+u)}return i[r][u]}function calculateSimilarity(n,t){let i=0,r=0;for(const u in n){const f=levenshteinDistance(n[u].toString(),t),e=Math.max(n[u].toString().length,t.length);i+=f;r+=e}return 1-i/r}function searchWithSimilarity(n,t){const i=[];for(const r of n){const n=calculateSimilarity(r,t);n>0&&i.push({obj:r,similarity:n})}return i.sort((n,t)=>t.similarity-n.similarity),i}function MS_SearchExecute(n,t){seaching_ajax_request&&seaching_ajax_request.readyState!=4&&seaching_ajax_request.abort();t.length>=2||n.length>=2?seaching_ajax_request=AjaxLoad(url="/Master/Master_Top/?handler=SearchQuick",data={text:n,text_nosign:t},async=!0,error=function(){notiError_SW()},success=function(i){if(i!="0"){let f=1,u=JSON.parse(i),e=[],o=[],r=[];if(t=t.toLowerCase(),n=n.toLowerCase(),u!=undefined&&u.length!=0){for(let t=0;t<u.length;t++){let i=u[t];i.CustomerName.toLowerCase()==n||i.LastName.toLowerCase()==n||i.CustCodeOld.toLowerCase()==n||i.CustCode.toLowerCase()==n||i.DocumentCode.toLowerCase()==n||i.CustomerPhone.toLowerCase()==n||i.CustomerPhone2.toLowerCase()==n||i.MemberCode.toLowerCase()==n?e.push(i):o.push(i)}r=e.concat(o);f=r!=undefined&&r.length!=0?1:0}else f=0;if(f==1){MS_SearchRender(r,"MS_SearchResult");Count_Up("MS_CountResult",r.length);sys_Hightlight(t,"search_text_name");sys_Hightlight(t,"search_text_phone");sys_Hightlight(t,"search_text_code");sys_Hightlight(xoa_dau(n),"search_text_name");sys_Hightlight(xoa_dau(n),"search_text_phone");sys_Hightlight(xoa_dau(n),"search_text_code");$("#MS_SearchMainResult").show();let i=$("#MS_SearchMainResult").parent().position().top;$("#MS_SearchMainResult").css({display:"block",top:i+20}).animate({top:i+40},300);Checking_TabControl_Permission()}else{$("#MS_SearchResult").empty();Count_Up("MS_CountResult",0);$("#MS_SearchMainResult").hide();$("#MS_SearchContent .btnsear_clear").removeClass("d-none");$("#MS_SearchMainResult").show();let n=$("#MS_SearchMainResult").parent().position().top;$("#MS_SearchMainResult").css({display:"block",top:n+20}).animate({top:n+40},300)}}},sender=null,before=null,complete=function(){$("#MS_SearchContent .spinner-border").hide();$("#MS_SearchContent .btnsear_clear").removeClass("d-none")}):($("#MS_SearchContent .spinner-border").hide(),$("#MS_SearchResult").empty(),Count_Up("MS_CountResult",0),$("#MS_SearchMainResult").hide(),$("#MS_SearchContent .btnsear_clear").removeClass("d-none"))}function MS_SearchRender(n,t){var r=document.getElementById(t),i;if(r!=null&&(r.innerHTML="",n&&n.length>0)){for(i=0;i<n.length;i++){let t=n[i],e=t.Gender==61?`<i class="me-1 fas fa-venus" style="color: rgb(255, 107, 133);"></i>`:`<i class="me-1 fas fa-mars" style="color: rgb(47, 137, 255);"></i>`;e=`<div class="position-absolute top-0 start-0">${e}</div>`;let a=t.CustomerID!=0?"/Customer/MainCustomer?CustomerID="+t.CustomerID:"/Marketing/TicketAction?CustomerID=0&TicketID="+t.TicketID,u="";t.Commune!=""&&(u=u+t.Commune+",");t.District!=""&&(u=u+t.District+",");t.City!=""&&(u=u+t.City+",");u!=""&&u.charAt(0)==","&&(u=u.substring(1));u!=""&&u.charAt(u.length-1)==","&&(u=u.slice(0,-1));u!=""&&(u=`<div class="mb-0 toogleitem" data-name="MS_Address">
                                <p class="text-sm text-dark mb-0 search_text_address">
                                    ${u}
                                </p>
                            </div>`);let o="",f="",s="",h="",c="",l="";t.Birthday.includes("1900")||(o=`<div class="mb-0 toogleitem " data-name="MS_Birthday">
                                <div class="d-flex align-items-center">
                                    <p class=" mb-0 pe-2 text-sm text-secondary title">${Outlang.Ns_ghitat} : </p>
                                    <p class="text-sm text-dark mb-0 search_text_phone value">
                                        ${SysDate().FUTC(t.Birthday).DateText()}
                                    </p>
                                 </div>
                            </div>`);t.MemberCode!=""&&(s=`<div class="mb-0 toogleitem " data-name="MS_Membercode">
                                <div class="d-flex align-items-center">
                                    <p class="mb-0 pe-2 text-sm text-secondary title">${Outlang.Thanh_vien} : </p>
                                    <p class="text-sm text-dark mb-0 search_text_phone value">
                                        ${t.MemberCode}
                                    </p>
                                 </div>
                            </div>`);t.CustomerPhone!=""&&(f=f+`<p class="text-sm text-dark mb-0 _tab_control_ search_text_phone" data-staff="${t.StaffID}" data-tab="phone_customer" >
                                    ${t.CustomerPhone}
                                </p>`);t.CustomerPhone2!=""&&(f=f+` <span class="px-2 text-xs fw-bolder text-dark">|</span>
                            <p class="value text-sm text-dark mb-0 _tab_control_ search_text_phone" data-staff="${t.StaffID}" data-tab="phone_customer" >
                                    ${t.CustomerPhone2}
                                </p>`);t.CustCodeOld!=""&&t.CustCodeOld!="0"&&(h=`<div class="mb-0 toogleitem " data-name="MS_CodeCusOld">
                                <div class="d-flex align-items-center">
                                    <p class="mb-0 pe-2 text-sm text-secondary title">${Outlang.KH_cu} : </p>
                                    <p class="text-sm text-dark mb-0 search_text_phone value">
                                        ${t.CustCodeOld}
                                    </p>
                                 </div>
                            </div>`);t.DocumentCode!=""&&(c=`<div class="mb-0 toogleitem" data-name="MS_DocumentCode">
                                <div class="d-flex align-items-center">
                                    <p class="mb-0 pe-2 text-sm text-secondary title">${Outlang.Ho_so} : </p>
                                    <p class="text-sm text-dark mb-0 search_text_phone value">
                                        ${t.DocumentCode}
                                    </p>
                                 </div>
                            </div>`);t.Note!=""&&(l=`<div class="mb-0 toogleitem" data-name="MS_Note">
                                <div class="d-flex align-items-center">
                                    <p class="mb-0 pe-2 text-sm text-secondary title">${Outlang.Ghi_chu} : </p>
                                    <p class="text-sm text-dark mb-0 search_text_phone value ellipsis_two_line">
                                        ${t.Note}
                                    </p>
                                 </div>
                            </div>`);f=`<div class="mb-0 mb-0 d-flex align-items-center">
                                <p class="mb-0 pe-2 text-sm text-secondary title">${Outlang.SDT_ghitat} : </p>
                                ${f}
                            </div>`;let v=`
                    <li class="border-0 border-bottom-sm list-group-item p-0 rounded-0">
                        <a class="search_result d-block px-4 py-2" target="_blank" href="${a}&ver=${versionofWebApplication}">
                            <div class="position-relative ps-3 d-flex flex-column justify-content-center ps-2">
                                ${e}
                                <div class="text-md mb-0">
                                    <h1 class="search_text_name fw-bold text-sm text-dark pe-2  mb-0 d-inline">
                                        ${t.CustomerName}
                                    </h1>
                                    <p class="search_text_code mb-0 text-primary text-sm d-inline">
                                        <span>${t.CustCode!=""?t.CustCode:MS_SearchRender_GeneralCode(t.TicketID)}</span>
                                    </p>
                                </div>
                                ${c}
                                ${h}
                                ${f}
                                ${s}
                                ${o}
                                ${u}
                                ${l}
                            </div>
                        </a>
                    </li>
                `;r.insertAdjacentHTML("beforeend",v)}MS_ShTable.Refresh()}}function MS_SearchRender_GeneralCode(n){try{let t="00000000";t=t+n.toString();let i=t.length;return t.slice(i-8,i)}catch(t){return""}}function MS_LangShow(){let n=MS_GET_Position_Popup($("#MS_LanguageArea").parent(),$("#MS_LanguageArea"));$("#MS_LanguageArea").css({display:"block",top:n.top+30,left:n.left-30,width:n.width!=undefined?n.width:""}).animate({top:n.top+20},300);event.stopPropagation()}function MS_NotiLoad(){AjaxLoad(url="/Master/Master_Top/?handler=NotiItemCount",data={},async=!0,error=function(){notiError_SW()},success=function(n){if(n!="0"){let t=JSON.parse(n),i=t[0].Number_UnRead;Number(i)!=0?($("#MS_NotiTotal").removeClass("d-none"),$("#MS_NotiTotal").parent().addClass("notiRing"),$("#MS_NotiTotal").html(t[0].Number_UnRead)):($("#MS_NotiTotal").addClass("d-none"),$("#MS_NotiTotal").parent().removeClass("notiRing"))}else $("#MS_NotiTotal").addClass("d-none")},sender=null)}function MS_NotiUpdateRead(n,t,i){AjaxLoad(url="/Master/Master_Top/?handler=NotiExecute",data={IsReadAll:n,NotiID:t,todo:i!=undefined?i:0},async=!0,error=function(){notiError_SW()},success=function(n){n=="1"&&MS_NotiLoad()},sender=null)}function MS_NotiEvent(){$("#MS_NotiContent .ms_notiitem").unbind().click(function(){let n=$(this).attr("data-id"),t=$(this).attr("data-todo");$(this).removeClass("unread");MS_NotiUpdateRead(0,n,t)})}function MS_NotiShow(){let n=MS_GET_Position_Popup($("#MS_NotiArea").parent(),$("#MS_NotiArea"));$("#MS_NotiArea").css({display:"block",top:n.top+10,left:n.left,width:n.width!=undefined?n.width:""}).animate({top:n.top+20},300);AjaxLoad(url="/Master/Master_Top/?handler=NotiItemLoad",data={},async=!0,error=function(){notiError_SW()},success=function(n){if(n!="0"){let t=JSON.parse(n);MS_NotiRender(t,"MS_NotiContent");ToolPopper();t&&t.length!=0?$("#MS_NotiEmpty").hide():$("#MS_NotiEmpty").show()}else $("#MS_NotiEmpty").show();$("#MS_NotiWaiting").hide()},sender=null,before=function(){$("#MS_NotiContent").empty();$("#MS_NotiContent").hide();$("#MS_NotiWaiting").show()},complete=function(){$("#MS_NotiContent").show()});event.stopPropagation()}function MS_NotiRender_GetLinkText(n,t,i,r,u,f){let e="",o="";if(f=f.trim().toLowerCase(),n==0){switch(t){case 1:o=Outlang.Sys_gui_du_lieu;e=i+"?ver="+versionofWebApplication;break;case 2:o=Outlang.Sys_gui_du_lieu;e=i+"?ver="+versionofWebApplication;break;case 4:o=Outlang.Sys_gui_yeu_cau;e=i+"?ver="+versionofWebApplication;break;case 5:f.includes("approved")?o=Outlang.Sys_duyet_phieu:f.includes("rejected")?o=Outlang.Sys_tu_choi:f.includes("undo")&&(o=Outlang.Sys_hoan_tac);e=i+"?ver="+versionofWebApplication;break;case 9:o=Outlang.Sys_cham_soc_khach_hang;e=i+"?ver="+versionofWebApplication;break;case 3:o=Outlang.Khach_hang;e=i+r+"&ver="+versionofWebApplication;break;case 6:e=i+u+"&CustomerID="+r+"&ver="+versionofWebApplication;break;case 7:e=i+"?ver="+versionofWebApplication;break;case 8:o=Outlang.Sys_lich_lam_viec;e=i+"?ver="+versionofWebApplication;break;case 9:o=Outlang.Sys_lich_lam_viec;e=i+"?ver="+versionofWebApplication;case 10:o="Gửi tin nhắn mới";e=i+"?ver="+versionofWebApplication}e=`<a href="${e}" target="_blank" class="access opacity-0 p-2 d-flex start-0 position-absolute w-100 h-100 mt-n2" >
                <i style="font-size:14px;" class="pe-1 mt-4 ms-auto fas text-primary  fa-chevron-right"></i>
            </a>`}return[e,o]}function MS_NotiRender_GetAction(n,t){let i="";if(n==0)switch(t){case 1:case 2:i=`<p class="text-info fw-bold mb-0 pe-2 text-xs">${t}</p>`;i='<span class="badge badge-sm badge-circle badge-floating bg-gradient-info position-absolute border-white" style="bottom: -3px;right: -4px;border: 2px solid white;"><i class="vtt-icon vttech-icon-list-ticket-file text-white" style="font-size: 10px;"><\/i><\/span>';break;case 3:i='<span class="badge badge-sm badge-circle badge-floating bg-gradient-success position-absolute border-white" style="bottom: -3px;right: -4px;border: 2px solid white;"><i class="fas fa-chevron-right text-white" style="font-size: 10px;"><\/i><\/span>'}else i='<span class="badge badge-sm badge-circle badge-floating bg-gradient-success position-absolute border-white" style="bottom: -3px;right: -4px;border: 2px solid white;"><i class="vtt-icon vttech-icon-task  text-white" style="font-size: 10px;"><\/i><\/span>';return i}function MS_NotiRender(n,t){var i=document.getElementById(t);if(i!=null){i.innerHTML="";let r="";if(n&&n.length>0)for(let t=0;t<n.length;t++){let i=n[t],v=Number(i.IsRead)==1?"":"unread",u="",f="",s=Number(i.IsRead)==1?"":`<span class="unread badge badge-md badge-dot me-2 ms-auto position-absolute" style="top: 13px;left: 22px;">
                        <i class="bg-gradient-success" style="width: .85rem;height: .85rem;border: 2px solid white !important;"></i>
                    </span>`,o=Fun_GetObject_ByID(MTDataEmployee,i.EmpSend);o!=null?(f=o.Avatar,u=o.Name):(f=Master_Default_Pic,u="");u=u=="-"?"":u;let h=u.trim().split(" ");u=h[h.length-1];let e=SysDate().FUTC(i.DateNoti).AgoText();e=e!=""?e:SysDate().FUTC(i.DateNoti).DateText();let c=MS_NotiRender_GetLinkText(i.IsTodo,i.Type,i.Link,i.CustomerID,i.TicketID,i.ContentNoti),y=c[0],l=c[1],a=`<img style="height: 30px;width: 30px;border: 1px solid #c6c8c9;" src="${f}" class="rounded-circle ">`;i.Type==10&&i.CustomerID!=0&&(s=`
                        <span class="unread badge badge-md badge-dot position-absolute" style="top: 20px;left: 22px; z-index:2;">
                            <i class="bg-gradient-success" style="width: .85rem;height: .85rem;border: 2px solid white !important;"></i>
                        </span>
                    `,a=`
                        <div style="height: 30px; width: 30px;">
                            <img
                                src="${f}"
                                class="rounded-2 position-absolute"
                                style="height: 30px; width: 30px; border: 1px solid #c6c8c9; top: 0; right: -5px;">

                            <div class="position-absolute d-flex align-items-center justify-content-center"
                                style="height: 18px; width: 18px; bottom: 0; left: 0; border: 1px solid #c6c8c9; border-radius: 50%; background-color: #f0f0f0; z-index: 2"
                                data-bs-toggle="tooltip" data-bs-original-title="Hello World">
                            <i style="font-size:14px;" class="fas fa-user"></i>
                            </div>
                        </div>
                    `);r=r+`<li class="ms_notiitem rounded-3 list-group-item border-0 position-relative d-flex p-2 px-2 rounded-0 ${v}" data-id="${i.ID}"  data-todo="${i.IsTodo}">
                        <div class="me-2 position-relative">
                            ${s}
                            ${a}
                        </div> 
                        <div class="ms-1"> 
                            <div style="line-height: 1.35 !important;" class="text-dark mb-n1 w-100 mb-0 text text-sm ellipsis_two_line">${i.ContentNoti}</div>
                            <div class="ellipsis_one_line mt-1 ">
                                 <div class="d-inline  text-sm text-lowercase">
                                   
                                    <span class="text-secondary  mb-0  text-sm  ">${u}</span>
                                    ${l!=""?`<i class="px-1 text-xs fas fa-caret-right"></i><span>${l}</span>`:``}
                                </div>
                            </div>
                        </div>
                        <div class="text-dark text-end text-xs ms-auto">
                             <div>   ${e}</div>
                     
                        </div>
                        ${y}    
                    </li> `}document.getElementById(t).innerHTML=r;MS_NotiEvent()}}function MS_NotiSysEvent(){$("#MS_NotiSysContent .ms_notiitemsys").unbind().click(function(){let n=$(this).attr("data-id");$(this).removeClass("unread");MS_NotiSysUpdateRead(n)})}async function MS_NotiSysLoad(){await new Promise(n=>{setTimeout(()=>{try{let n=localstorage_get("sysnoti");if(n!=""&&(_notilist=JSON.parse(n).data,_notilist=_notilist!=""?_notilist:{},Object.values(_notilist).filter(n=>n===0).length)){let n=$("#MS_NotiSysTotal");n.length&&n.hasClass("d-none")&&(n.parent().addClass("notiRing"),n.removeClass("d-none"))}}catch(t){}n()})})}function MS_NotiSysShow(){let n=MS_GET_Position_Popup($("#MS_NotiAreaSys").parent(),$("#MS_NotiAreaSys"));$("#MS_NotiAreaSys").css({display:"block",top:n.top+10,left:n.left,width:n.width!=undefined?n.width:""}).animate({top:n.top+20},300);AjaxLoad(url="/Master/Master_Top/?handler=NotiItemLoadSys",data={},async=!0,error=function(){notiError_SW()},success=function(n){if(n!="0"){let t=JSON.parse(n);MS_NotiSysRender(t,"MS_NotiSysContent");t&&t.length!=0?$("#MS_NotiSysEmpty").hide():$("#MS_NotiSysEmpty").show()}else $("#MS_NotiSysEmpty").show();$("#MS_NotiSysWaiting").hide()},sender=null,before=function(){$("#MS_NotiSysContent").empty();$("#MS_NotiSysContent").hide();$("#MS_NotiSysWaiting").show()},complete=function(){$("#MS_NotiSysContent").show()});event.stopPropagation()}function MS_NotiSysRender(n,t){var i=document.getElementById(t);if(i!=null){i.innerHTML="";let r="";if(n&&n.length>0){let t={},i=localstorage_get("sysnoti");i!=""&&(t=JSON.parse(i).data);t=t!=""?t:{};for(let i=0;i<n.length;i++){let u=n[i],f=``,h=``,c=``;t[u.ID]==0&&(c="unread",h=`<span class="unread badge badge-md badge-dot me-2 ms-auto position-absolute" style="top: 13px;left: 22px;">
                        <i class="bg-gradient-success" style="width: .85rem;height: .85rem;border: 2px solid white !important;"></i>
                    </span>`);let s=SysDate().FUTC(u.DateNoti).AgoText();s=s!=""?s:SysDate().FUTC(u.DateNoti).DateText();let e=``,o=``;u.Topic=="payment"&&(e=`<div class="avatar imi payment rounded-circle p-1">
                        <i class="fas fa-shopping-cart"></i>
                        </div>`,f=u.CustName,o=isNaN(u.Content)?u.Content:Outlang.Sys_thanh_toan+": "+formatNumber(u.Content));u.Topic=="booking"&&(e=`<div class="avatar imi booking rounded-circle p-1" >
                        <i class="fas fa-calendar-check "></i>
                        </div>`,f=u.Content,o=Outlang.Sys_dat_lich_hen_online??"Đặt lịch hẹn online");u.Topic=="rating"&&(e=`<div class="avatar imi rating rounded-circle p-1" >
                        <i class="fas fa-star"></i>
                        </div>`,f=u.Content,o=Outlang.Sys_dat_lich_hen_online??"Đặt lịch hẹn online");u.Topic=="profileonline"&&(e=`<div class="avatar imi profileonline rounded-circle p-1">
                        <i class="fas fa-user-plus "></i>
                        </div>`,f=u.CustName,o=Outlang.Tao_ho_so_thanh_cong??"Tạo hồ sơ thành công");let l=MS_NotiRender_GetLinkSys(u.Topic,u.CustomerID);r=r+`<li class="ms_notiitemsys rounded-3 list-group-item border-0 position-relative d-flex ${c}  p-0 rounded-0 px-2" data-id="${u.ID}">
                        <div class="d-flex w-100 border-bottom py-2">
                            <div class="me-2 position-relative">
                                <div class="  border-1 fea mt-1" >
                                     ${h}
                                     ${e}
                                </div>
                            </div> 
                            <div class="ms-1"> 
                                <div style="line-height: 1.35 !important;" class="text-dark mb-n1 w-100 mb-0 text text-sm ellipsis_two_line">
                                    <span class="text-dark text-sm  fw-bold">${f}</span>
                                
                             
                                </div>
                                <div class="ellipsis_one_line ">
                                     <div class="d-inline ">
                                      <span class="opacity-7  text-lowercase text-dark text-sm">${o}</span>
                               
                                   
                                    </div>
                                </div>
                            </div>
                            <div class="text-dark text-xs ms-auto">
                                ${s}
                            </div>
                            ${l}
                        </div>
                    </li> `}}document.getElementById(t).innerHTML=r;MS_NotiSysEvent()}}function MS_NotiRender_GetLinkSys(n,t){let i="";switch(n){case"payment":i=`/Customer/MainCustomer?CustomerID=${t}&ver=${versionofWebApplication}&tab=thanh-toan`;break;case"booking":i=`/appcustomer/desk/general?ver=${versionofWebApplication}&slug=lich-hen`;break;case"rating":i=`/appcustomer/desk/general?ver=${versionofWebApplication}&slug=danh-gia`;break;case"profileonline":i=`/Customer/MainCustomer?CustomerID=${t}&ver=${versionofWebApplication}`}return`<a href="${i}" target="_blank" class="access opacity-0 p-2 d-flex start-0 position-absolute w-100 h-100 mt-n2" >
                <i style="font-size:14px;" class="pe-1 mt-4 ms-auto fas text-primary  fa-chevron-right"></i>
            </a>`}function MS_NotiSysUpdateRead(n=0){try{let t={},r=localstorage_get("sysnoti");r!=""&&(t=JSON.parse(r).data);t=t!=""?t:{};n==0?t={}:t[n]=1;t=Noti_Trim(t,20);localstorage_set("sysnoti",t);let i=$("#MS_NotiSysTotal");Object.values(t).filter(n=>n===0).length?(i.parent().addClass("notiRing"),i.removeClass("d-none")):(i.addClass("d-none"),i.parent().removeClass("notiRing"))}catch(t){}}function MS_SearchEnterExecute(){let t=location.pathname.split("/").slice(-1)[0],n=xoa_dau($("#MS_SearchInput").val().toLowerCase()).trim();t=="Searching"?window.open("/Searching/Searching?SeachingText="+n,"_self"):window.open("/Searching/Searching?SeachingText="+n)}function MS_GET_Position_Popup(n,t){let i={top:0,left:0},f=$(window).width(),s=n.outerHeight(),e=n.outerWidth(),h=t.outerHeight(),r=t.outerWidth(),o=n.offset(),c=o.top,u=o.left;return f-u>r?i.left=0:u-r+e>0?i.left=-r+e:(i.left=-u+10,i.width=f-20),i.top=s,i}var mainbody;$("#MS_SearchInput").keyup(function(){$(this).val().length>0?$("#MS_SearchContent .btnsear_clear").removeClass("opacity-1").addClass("d-none"):$("#MS_SearchContent .btnsear_clear").addClass("opacity-1").addClass("d-none");$("#MS_SearchContent .spinner-border").show();clearTimeout(Timer_Search_Customer);Timer_Search_Customer=setTimeout(function(){let n=$("#MS_SearchInput").val().toLowerCase().trim(),t=removeSpecChar(xoa_dau(n));MS_SearchExecute(n,t)},500);setTimeout(function(){$("#MS_SearchContent .spinner-border").hide()},1e3)});$("#MS_SearchInput").focus(function(){clearTimeout(Timer_Search_Customer);Timer_Search_Customer=setTimeout(function(){let n=$("#MS_SearchInput").val().toLowerCase().trim(),t=removeSpecChar(xoa_dau(n));MS_SearchExecute(n,t)},500)});$("#MS_SearchContent").on("click",".btnsear_clear",function(){$("#MS_SearchInput").val("");$("#MS_SearchContent .btnsear_clear").addClass("opacity-1");$("#MS_SearchResult").empty();Count_Up("MS_CountResult",0);$("#MS_SearchMainResult").hide();$("#MS_SearchContent .spinner-border").hide()});if(document.querySelector(".fixed-plugin")){let n=document.querySelector(".fixed-plugin"),i=document.querySelector(".fixed-plugin-button"),t=document.querySelectorAll(".fixed-plugin-button-nav"),u=document.querySelectorAll(".fixed-plugin-close-button"),f=document.querySelector(".fixed-plugin .card"),r=document.getElementById("navbarBlur"),e=document.getElementById("navbarFixed");i&&(i.onclick=function(){n.classList.contains("show")?n.classList.remove("show"):n.classList.add("show")});t&&t.forEach(t=>{t.onclick=function(){n.classList.contains("show")?n.classList.remove("show"):n.classList.add("show")}});u.forEach(function(n){n.onclick=function(){document.querySelectorAll(".fixed-plugin").forEach(function(n){n.classList.remove("show")})}});document.querySelector("body").onclick=function(r){r.target!=i&&r.target!=t[0]&&r.target!=t[1]&&r.target.closest(".fixed-plugin .card")!=f&&n.classList.remove("show")};r&&r.getAttribute("data-scroll")=="true"&&e}if(document.querySelector(".sidenav-toggler")){var sidenavToggler=document.querySelectorAll(".sidenav-toggler"),sidenavShow=document.getElementsByClassName("g-sidenav-show")[0],toggleNavbarMinimize=document.getElementById("navbarMinimize");sidenavShow&&sidenavToggler.forEach(n=>{n.onclick=function(){sidenavShow.classList.contains("g-sidenav-hidden")?(sidenavShow.classList.remove("g-sidenav-hidden"),sidenavShow.classList.add("g-sidenav-pinned"),toggleNavbarMinimize&&(toggleNavbarMinimize.click(),toggleNavbarMinimize.removeAttribute("checked"))):(sidenavShow.classList.remove("g-sidenav-pinned"),sidenavShow.classList.add("g-sidenav-hidden"),toggleNavbarMinimize&&(toggleNavbarMinimize.click(),toggleNavbarMinimize.setAttribute("checked","true")))}});window.innerWidth<1200&&(mainbody=document.getElementById("BodyMain"),mainbody&&mainbody.classList.add("g-sidenav-hidden"))}