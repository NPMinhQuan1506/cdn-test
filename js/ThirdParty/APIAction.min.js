function apia_getpath(){try{return location.pathname}catch(n){return""}}function apia_mapping(n){function i(t,u,f=0,e,o,s,h){if(t.Path=="")r(u,t,e,o,s);else{let c=JSON.parse(t.Path);if(f<t.LevelPath){let a=t.IsMaster==1?e.IndexMaster:e.IndexDetail;a=(a-1)*t.CountSelf+s;let v=c[f],l;if(u[v])l=u[v]??{};else{let n=h!=undefined?h-1:a;l=u[n][v]??{}}if(f==t.LevelPath-1&&Object.keys(l).length>0){l[a]==undefined&&(l[a]={});let n=l[a];r(n,t,e,o,s)}let y=n[n.findIndex(n=>n.ParaName==v)];h=y.IsMaster==1?e.IndexMaster:e.IndexDetail;i(t,l,f+1,e,o,s,h)}}}function r(n,i,r,f,e){switch(i.TypeData){case"string":case"number":case"boolean":case"datetime":if(n[i.ParaName]==undefined&&(i.IsMaster==1&&r.IndexDetail==1||i.UseDataFirst==1||i.IsMaster==0)){let o=i.UseDataFirst==1?{...f}:{...r};if(i.MapField!="")n[i.ParaName]=t(o[i.MapField],i.TypeData,i.TypeItem);else if(i.Conditions!=""){let r=u(i,o,e);n[i.ParaName]=t(r,i.TypeData,i.TypeItem)}else n[i.ParaName]=t(i.DefaultValue,i.TypeData,i.TypeItem)}break;case"array":switch(i.TypeItem){case"object":n[i.ParaName]==undefined&&(n[i.ParaName]=[{}]);break;case"string":case"number":case"boolean":case"datetime":if(n[i.ParaName]==undefined&&(n[i.ParaName]=[]),i.IsMaster==1&&r.IndexDetail==1||i.UseDataFirst==1||i.IsMaster==0){let s=i.UseDataFirst==1?{...f}:{...r},o;if(i.MapField!="")o=s[i.MapField];else if(i.Conditions!=""){let n=u(i,s,e);o=t(n,i.TypeData,i.TypeItem)}else o=t(i.DefaultValue,i.TypeData,i.TypeItem);n[i.ParaName].push(o)}}}}function t(n,t,i){try{let r;switch(t){case"string":r=n.toString();break;case"number":r=isNaN(Number(n))?n:Number(n);break;case"boolean":r=String(n).toLowerCase()==="true";break;case"datetime":r=f(n,t,i);break;case"default":r=n}return r}catch{return n}}function f(n,t,i){try{let r;if(t=="datetime"){let t=new Date(n),u=t.getMonth()+1<10?`0${t.getMonth()+1}`:t.getMonth()+1,f=t.getDate()<10?`0${t.getDate()}`:t.getDate(),e=t.getFullYear(),o=t.getHours()<10?`0${t.getHours()}`:t.getHours(),s=t.getMinutes()<10?`0${t.getMinutes()}`:t.getMinutes(),h=t.getSeconds()<10?`0${t.getSeconds()}`:t.getSeconds();switch(i){case"yyyy-mm-dd":r=`${e}-${u}-${f}`;break;case"yyyy-mm-dd hh:mm:ss":r=`${e}-${u}-${f} ${o}:${s}:${h}`;break;case"dd-mm-yyyy":r=`${f}-${u}-${e}`;break;case"dd/mm/yyyy":r=`${f}/${u}/${e}`;break;case"dd-mm-yyyy hh:mm:ss":r=`${f}-${u}-${e} ${o}:${s}:${h}`;break;case"dd/mm/yyyy hh:mm:ss":r=`${f}/${u}/${e} ${o}:${s}:${h}`;break;case"":r=n}}else r=n;return r}catch{return n}}function u(n,t,i){try{let u="",r=JSON.parse(n.Conditions);if($orderSelf=i,$item={...t},$dataKeys={...n},typeof $item!="undefined"&&typeof $orderSelf!="undefined")for(let n=0;n<r.length;n++)if(eval(r[n].condi)){u=eval(r[n].result);break}return u}catch(r){return""}}return t=>{try{let r={},u=[],f={};for(let e=0;e<t.length;e++){let o=t[e];o.IndexDetail==1&&(u.push({ID:o.ID,Type:o.Type,MasterGuid:o.MasterGuid,IsSuccess:0}),f={...o});for(let t=0;t<n.length;t++){let e=n[t],u=0;while(u<e.CountSelf)i(e,r,countRec=0,o,f,u),u++}}return{objResult:r,dataVoucher:u}}catch(r){return{}}}}var $orderSelf=0,$item={},$dataKeys={};